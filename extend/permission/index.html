<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head><meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="../../res/Products.RiplaLayout/styles.css" />

    <title>Permission Service</title>
    
    <meta name="generator" content="Silva" />
    
    <link rel="shortcut icon" href="../../res/silva.core.layout.porto/favicon.ico" />

    <!-- Injector for on-the-fly inclusion -->
    


  </head>

  <body id="index">
    <div class="wrapper">
  <header>
    <h1 class="header">
        <a href="../.."
           title="Ripla [Top]">Ripla</a>  
    </h1>
    <p class="header">Rich Platform project for Java web applications.</p>
    <ul>
      <li class="download"><a class="buttons" href="http://aktion-hip.github.io/ripla/downloads/" target="_blank">Download Files</a></li>
      <li class="download"><a class="buttons" href="https://github.com/aktion-hip/ripla/zipball/master" target="_blank">Download ZIP</a></li>
      <li class="download"><a class="buttons" href="https://github.com/aktion-hip/ripla/tarball/master" target="_blank">Download TAR</a></li>
      <li><a class="buttons github" href="https://github.com/aktion-hip/ripla">View On GitHub</a></li>
    </ul>
    <p class="header">This project is maintained by <a class="header name" href="https://github.com/aktion-hip">aktion-hip</a></p>
  </header>
  
  <sidebar>
    <ul>
      <div class="navigation">
  <ul id="navigation-menu" class="navigation-level-0">
    
      <li class="level-0">
        <a href="../../impl" title="Create Application">Create Application</a>
        
      </li>
    
    
      <li class="level-0 selected">
        <a href="../../extend" title="Extension Points" class="onbranch">Extension Points</a>
        
          
            <ul class="navigation-level-1">
    
      <li class="level-1">
        <a href="../../extend/usecase" title="Use Case Service">Use Case Service</a>
        
      </li>
    
    
      <li class="level-1">
        <a href="../../extend/skin" title="Skin Service">Skin Service</a>
        
      </li>
    
    
      <li class="level-1">
        <a href="../../extend/toolbar" title="Toolbar Service">Toolbar Service</a>
        
      </li>
    
    
      <li class="level-1">
        <a href="../../extend/extendible" title="Extendible Menu Service">Extendible Menu Service</a>
        
      </li>
    
    
      <li class="level-1 selected">
        <a href="../../extend/permission" title="Permission Service" class="onbranch">Permission Service</a>
        
      </li>
    
    
      <li class="level-1">
        <a href="../../extend/useadmin" title="User Administration Service">User Administration Service</a>
        
      </li>
    
  </ul>
          
        
      </li>
    
    
      <li class="level-0">
        <a href="../../demo" title="Ripla Demo Application">Ripla Demo Application</a>
        
      </li>
    
    
      <li class="level-0">
        <a href="../../downloads" title="Downloads">Downloads</a>
        
      </li>
    
  </ul>
</div>

    </ul>    
  </sidebar>
  
  <section>
  <h1>Permission Service</h1>
  <p>A Ripla
application is a dynamic system. Bundles providing business logic or visual
aspects to the application can emerge or disappear during the application's
life time. Therefore, it's impossible to define a system restricting the access to resources up front. Instead, use case bundles have to be given the possibility
to define permissions to protect aspects of their functionality themselves.
Plus they need the possibility to notify the system about the permissions they
define.</p>

<p>This is
where <span class="underline">org.ripla.services.IPermissionEntry</span> comes into play. By
implementing service providers for <span class="underline">IPermissionEntry</span>,
bundles can define permissions and register them to the application&#8217;s permission
registry.</p>

<p><strong>Note</strong>: the Ripla permission service collaborates with the OSGi user admin service (see <a class="link" title="User Administration Service" target="_self" href="../../extend/useadmin">User Administration Service</a>). In OSGi user admin wording, the permission is equivalent to an action group.</p>

<pre>public interface IPermissionEntry {
&#160;&#160;&#160; String getPermissionName();
&#160;&#160;&#160; String getPermissionDescription();
&#160;&#160;&#160; String[] getRequieredMemberNames();
&#160;&#160;&#160; String[] getMemberNames();
}</pre>

<p><span class="underline">IPermissionEntry.getPermissionName()</span> returns the name (i.e. ID) of the permission. A use case controller can further on refer to this permission when implementing the <span class="underline">AbstractController.needsPermission()</span> method (see <a class="link" title="Use Case Controller Class" target="_self" href="../../impl/usecase/controller">Use Case Controller Class</a>).<br></p>

<p><span class="underline">IPermissionEntry.getPermissionDescription()</span> returns the pemission's description, i.e. some information about the resources protected by this permission.<br></p>

<p><span class="underline">IPermissionEntry.getRequieredMemberNames()</span> returns the set of required members (String array) of the group created with this permission name. If a resource is protected by this permission, i.e. the controller needs this permission, a user must have one of the specified roles (i.e. has to be member of <em>all</em> of those groups) for that he is authorized to access this resource.<br></p>

<p><span class="underline">IPermissionEntry.getMemberNames()</span> returns the set of required members (String array) of the group created 
with this permission name. If a resource is protected by this 
permission, i.e. the controller needs this permission, a user must have 
one of the specified roles (i.e. has to be member of <em>one</em> of those 
groups) for that he is authorized to access this resource.</p>

<h3>Example</h3>

<p>In the Demo application, the skin select action is protected for that only admin users can access this functionality. This protection is implemented as follows:<br></p>

<pre>public class PermissionEntry implements IPermissionEntry {
&#160;&#160;&#160; public String getPermissionName() {
&#160;&#160;&#160; &#160;&#160;&#160; return "config.skin";
&#160;&#160;&#160; }
&#160;&#160;&#160; public String getPermissionDescription() {
&#160;&#160;&#160; &#160;&#160;&#160; return "Permission to select the skins.";
&#160;&#160;&#160; }
&#160;&#160;&#160; public String[] getRequieredMemberNames() {
&#160;&#160;&#160; &#160;&#160;&#160; return new String[] {};
&#160;&#160;&#160; }
&#160;&#160;&#160; public String[] getMemberNames() {
&#160;&#160;&#160; &#160;&#160;&#160; return new String[] {"ripla.admin.group"};
&#160;&#160;&#160; }
}</pre>

<p>This examle registeres a permission with the name "config.skin" and states that every user of the admin group has this permission. The following controller refers to this permission to protect the resource it controls:<br></p>

<pre>@UseCaseController
public class SkinSelectController extends AbstractController {
&#160;&#160;&#160; protected String needsPermission() {
&#160;&#160;&#160; &#160;&#160;&#160; return "config.skin";
&#160;&#160;&#160; }
//...
}
</pre>

<p> The controller class states that it needs the pemission "config.skin". This way, only users that are member of the amin group will be able to access the resouce controlled by this class.<br></p>

</section>

  <footer>
    <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
  </footer>
</div>
<!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
  
  </body>
</html>
